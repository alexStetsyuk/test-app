import React, { useState } from 'react'
import { ContentWrapper } from '../shared/ContentWrapper'

export default function Star({ count, rating, onRatingChange }) {
  const [hover, setHover] = useState(0)

  console.log(rating)
  const stars = Array(count)
    .fill(0)
    .map((_, i) => i + 1)
    .map((idx) => {
      return (
        <svg
          key={idx}
          onMouseEnter={() => setHover(idx)}
          onMouseLeave={() => setHover(rating)}
          onClick={() => onRatingChange(idx)}
          width='20'
          height='20'
          viewBox='0 0 20 20'
          fill='none'
          xmlns='http://www.w3.org/2000/svg'
        >
          <path
            d='M8.14374 4.62753C8.93034 2.66653 9.32364 1.68604 9.99997 1.68604C10.6763 1.68604 11.0696 2.66653 11.8562 4.62753L11.8928 4.71885C12.3372 5.82672 12.5594 6.38065 13.0123 6.71734C13.4651 7.05403 14.0596 7.10727 15.2485 7.21374L15.4634 7.23299C17.4092 7.40726 18.3822 7.49439 18.5903 8.11337C18.7985 8.73235 18.076 9.3897 16.6309 10.7044L16.1487 11.1432C15.4172 11.8087 15.0514 12.1414 14.8809 12.5776C14.8491 12.6589 14.8227 12.7423 14.8018 12.8271C14.6897 13.2817 14.7968 13.7645 15.0111 14.7299L15.0777 15.0305C15.4714 16.8048 15.6682 17.692 15.3246 18.0746C15.1961 18.2176 15.0292 18.3206 14.8438 18.3712C14.3476 18.5066 13.6431 17.9325 12.2342 16.7844C11.309 16.0305 10.8464 15.6536 10.3153 15.5688C10.1064 15.5354 9.89353 15.5354 9.68463 15.5688C9.15352 15.6536 8.69094 16.0305 7.76577 16.7844C6.35681 17.9325 5.65234 18.5066 5.15614 18.3712C4.97072 18.3206 4.80381 18.2176 4.67538 18.0746C4.33171 17.692 4.52854 16.8048 4.92222 15.0305L4.98889 14.7299C5.2031 13.7645 5.31021 13.2817 5.19815 12.8271C5.17725 12.7423 5.15081 12.6589 5.11901 12.5776C4.94854 12.1414 4.58279 11.8087 3.85128 11.1432L3.369 10.7044C1.92395 9.3897 1.20143 8.73235 1.40961 8.11337C1.61779 7.49439 2.5907 7.40726 4.53651 7.23299L4.75145 7.21374C5.94036 7.10727 6.53482 7.05403 6.98767 6.71734C7.44052 6.38065 7.66272 5.82672 8.10711 4.71885L8.14374 4.62753Z'
            stroke={idx <= (hover || rating) ? '#4EC970' : '#CCD2E3'}
            fill={idx <= (hover || rating) ? '#4EC970' : null}
            strokeWidth='2'
          />
        </svg>
      )
    })
  return <ContentWrapper display='flex'>{stars}</ContentWrapper>
}
